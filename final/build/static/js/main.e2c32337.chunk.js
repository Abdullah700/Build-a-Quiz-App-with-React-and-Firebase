(window["webpackJsonpquiz-app-react-firebase"]=window["webpackJsonpquiz-app-react-firebase"]||[]).push([[0],{30:function(e,t,n){e.exports=n(44)},35:function(e,t,n){},39:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(25),o=n.n(s);n(35),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=r.a.createContext(null),i=function(e){return function(t){return r.a.createElement(c.Consumer,null,function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))})}},u=c,l=n(5),m=n(16),h=n.n(m),p=(n(36),{apiKey:"AIzaSyAL_J6lxzu_T8SBF1bgKCKESpQvY4m3lNk",authDomain:"api-fake-test.firebaseapp.com",databaseURL:"https://api-fake-test.firebaseio.com",projectId:"api-fake-test",storageBucket:"api-fake-test.appspot.com",messagingSenderId:"177387244027"}),d=function e(){var t=this;Object(l.a)(this,e),this.scores=function(){return t.db.ref("scores")},h.a.initializeApp(p),this.db=h.a.database()},f=(n(39),n(11)),v=n(10);function b(){return r.a.createElement("div",{id:"home",className:"container"},r.a.createElement("h1",null,"Quiz App"),r.a.createElement(f.b,{to:"/game",className:"btn"},"Start Game"),r.a.createElement(f.b,{to:"/highScores",className:"btn"},"High Scores"))}var g=n(29),E=n(6),S=n(8),w=n(7),y=n(9),j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).state={classToApply:"",selectedAnswer:-1,answering:!1},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.question;return r.a.createElement("div",null,r.a.createElement("h2",{id:"question",dangerouslySetInnerHTML:{__html:t.question}}),t.answerChoices.map(function(n,a){return r.a.createElement("div",{key:a,className:"choice-container ".concat(e.state.selectedAnswer===a&&e.state.classToApply),onClick:function(){return e.checkAnswer(t,a)}},r.a.createElement("p",{className:"choice-prefix"},a+1),r.a.createElement("p",{className:"choice-text",dangerouslySetInnerHTML:{__html:n}}))}))}},{key:"checkAnswer",value:function(e,t){var n=this;if(!this.state.answering){var a=t===e.answer?"correct":"incorrect",r=t===e.answer?10:0;this.setState({classToApply:a,selectedAnswer:t,answering:!0}),setTimeout(function(){n.setState({selectedAnswer:-1,answering:!1}),n.props.changeQuestion(r)},1e3)}}}]),t}(r.a.Component);function k(e){var t=e.max,n=e.current/t*100;return r.a.createElement("div",{id:"progressBar"},r.a.createElement("div",{id:"progressBarFull",style:{width:"".concat(n,"%")}}))}function O(e){var t=e.score,n=e.questionNumber;return r.a.createElement("div",{id:"hud"},r.a.createElement("div",{id:"hud-item"},r.a.createElement("p",{id:"progressText",className:"hud-prefix"},"Question ".concat(n,"/10")),r.a.createElement(k,{max:10,current:n})),r.a.createElement("div",{id:"hud-item"},r.a.createElement("p",{className:"hud-prefix"},"Score"),r.a.createElement("h1",{className:"hud-main-text",id:"score"},t)))}var N=n(28),q=i(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).saveHighScore=function(e){e.preventDefault();var t={name:n.state.username,score:n.props.score};n.props.firebase.scores().push(t,function(){n.props.scoreSaved()})},n.onInputChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(N.a)({},t,a))},n.state={username:""},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{id:"finalScore"},this.props.score),r.a.createElement("form",{onSubmit:function(t){return e.saveHighScore(t)}},r.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"username",value:this.state.username,onChange:this.onInputChange}),r.a.createElement("button",{type:"submit",className:"btn",id:"saveScoreBtn",disabled:!this.state.username},"Save")),r.a.createElement(f.b,{to:"/",className:"btn"},"Go Home"))}}]),t}(r.a.Component)),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).scoreSaved=function(){n.props.history.push("/")},n.convertQuestionsFromAPI=function(e){return e.map(function(e){var t={question:e.question};return t.answerChoices=Object(g.a)(e.incorrect_answers),t.answer=Math.floor(4*Math.random()),t.answerChoices.splice(t.answer,0,e.correct_answer),t})},n.changeQuestion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n.setState({score:n.state.score+e},function(){if(n.state.questions.length<=0)n.setState({done:!0});else{var e=Math.floor(Math.random()*n.state.questions.length),t=n.state.questions[e],a=n.state.questions.filter(function(t,n){return n!==e});n.setState({loading:!1,questions:a,currentQuestion:t,questionNumber:n.state.questionNumber+1})}})},n.state={questions:{},currentQuestion:null,loading:!0,score:0,questionNumber:0,done:!1},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://opentdb.com/api.php?amount=3&category=9&difficulty=easy&type=multiple").then(function(e){return e.json()}).then(function(t){var n=t.results,a=e.convertQuestionsFromAPI(n);e.setState({questions:a},function(){e.changeQuestion()})})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.currentQuestion,a=e.questionNumber,s=e.score,o=e.done;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"loader",className:t?"":"hidden"}),!o&&r.a.createElement("div",{id:"game",className:t?"hidden":""},r.a.createElement(O,{questionNumber:a,score:s}),n&&r.a.createElement(j,{question:n,changeQuestion:this.changeQuestion})),o&&r.a.createElement(q,{score:s,history:this.props.history,scoreSaved:this.scoreSaved}))}}]),t}(r.a.Component),C=i(function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).formatScoreData=function(e){var t=[];for(var n in e){var a=e[n];a.key=n,t.push(a)}return t.sort(function(e,t){return t.score-e.score}).slice(0,10)},n.state={loading:!0,scores:[]},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.scores().on("value",function(t){var n=t.val(),a=e.formatScoreData(n);e.setState({scores:a})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.scores().off()}},{key:"render",value:function(){var e=this.state.scores;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"highScoresList"},r.a.createElement("h1",null,"HIGH SCORES"),e.map(function(e){return r.a.createElement("li",{key:e.key,className:"high-score"},e.name," - ",e.score)})))}}]),t}(r.a.Component)),x=function(){return r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(v.a,{exact:!0,path:"/",component:b}),r.a.createElement(v.a,{path:"/game",component:A}),r.a.createElement(v.a,{path:"/highScores",component:C})))};o.a.render(r.a.createElement(u.Provider,{value:new d},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.e2c32337.chunk.js.map